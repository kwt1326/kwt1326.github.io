## 🎈 **개설하게된 계기**

지금까지는 따로 정리해서 올리는 블로깅이 너무 귀찮아서 Mac OS 에 있는 기본 클라우드에 저장되는 메모장을 이용하여 모르는 부분을 찾아서 대강 자료들만 모아 놓았었는데, 이게 모이다 보니 상당히 쌓이기도 했고 흡사 오래된 창고같이 되어 버려서 블로그 하는것도 연습할 겸 해서 새로 만들게 되었습니다.

### **😅**
요약하면.. 이제야 정리할 마음이 생겼습니다.. ㅎㅎ

## 🎲 **프레임워크 결정**

### 🪄 **Next.js**

![image](https://media.vlpt.us/images/j_user0719/post/987f8b39-0114-401d-86d8-826503499d3a/Next.jpeg)

> Vercel 에서 만든 React.js 기반으로 SSR 을 효과적으로 지원하기 위한 프레임워크로, 다양한 최적화를 지원하고 있고 사용자가 꽤 있으며 현재도 꾸준히 업데이트 되고 있습니다. ( 최근 소식을 들어보니 Rust 컴파일러를 사용하여 더욱 좋아졌다고 하네요. 심지어 기술을 지원한 사람이 한국인 ㄷㄷ )

블로그를 만들기 위해 무엇을 사용할까 고민을 많이 했는데, 현재 업무에서 가장 많이 사용하는 프레임워크인 Next.js 를 사용해서 개인 프로젝트 겸 해서 만들어 보기로 했습니다. 

마침 Next.js 가 자동 정적 페이지 최적화 기능을 지원해서 적합하다 판단했기 때문에 바로 결정 할 수 있었습니다.

## 🎳 **배포 방법**

### 🪄 **github-page**

![image](https://i.ytimg.com/vi/2MsN8gpT6jY/maxresdefault.jpg)

> github-page 는 github 계정당 하나의 정적 사이트를 배포할 수 있는 github 의 호스팅 서비스 입니다. netlify, vercel 등과 비슷하게 정적 사이트에 적합하게 사용 가능합니다. 배포하게 되면 url 은 https://<github 계정명>.github.io/ 과 같은 형태가 됩니다.

배포는 간단하게 github-page 를 사용하여 배포할 것입니다. Next.js 에서는 Vercel 을 통하여 배포하는 것이 가장 쉽다고 하지만, 좀더 관리하기 위한 편의성을 위해서 사용하려고 합니다. (어차피 추가적인 기능이 필요한 것도 아니기 때문에..)

## ⌨️ **구현**

대부분의 코드는 github-page 로 호스팅 하기 위해서는 public 으로 공개 해야만 합니다. 따라서 제 github 에서 해당 블로그의 코드를 확인하실 수 있습니다. 그래서 중요하다고 생각되는 코드만 몇가지 소개해 드리려고 합니다.

### **프로젝트 생성**

`yarn create next-app`
해당 코드를 사용하여 간단한 프로젝트를 생성합니다.
`npm run dev`
실행이 되는지 확인합니다.

### **데이터 관리**

우선 이 블로그를 만들때, [HEXO 블로그 프레임워크](https://hexo.io/)의 아이디어를 조금 빌렸습니다. 정적 페이지 프로젝트는 만든적이 거의 없어서, 블로그 포스팅의 저장 및 관리 방식을 어떻게 해야 할지 막막했는데, 이 프레임워크 에서는 db.json 같은 파일을 생성하여 관리 하는것으로 보였습니다.

그리하여 저 또한 저만의 로컬 db 구조를 만들었습니다.

```
{
  "category": [
    "TEST_CATEGORY"
  ],
  "posts": [
    {
      "title": "테스트 포스팅 타이틀",
      "file_name": "테스트-포스팅-타이틀",
      "category": "TEST_CATEGORY",
      "created_at": "2021-11-01 09:15:27"
    }
  ]
}
```

해당 방식으로 저장하려면 우선 파일 읽기/쓰기가 가능해야 하므로 Node 백엔드 단에서 처리하도록 해야 합니다. 그래서 Next.js 에서 제공하는 post/api 폴더에 POST localhost:<port>/post API 하나를 만들겁니다.

### **포스트 쓰기/읽기 구현**

![image](https://camo.githubusercontent.com/5d5d1faf2493898112ec87f59fcafbc2f8da37b74826df199713d62eb7191fd4/68747470733a2f2f756963646e2e746f6173742e636f6d2f746f61737475692f696d672f7475692d656469746f722d62692e706e67)

블로깅을 하려면 글을 쓸 Editor 와 결과물인 마크다운 파일을 읽어들일 Reader 가 필요 합니다. 이것을 구현하기 위해 어떤 라이브러리를 도입할까 찾아보다가 NHN 에서 만든 [tui.editor](https://ui.toast.com/tui-editor) 를 사용하기로 했습니다. editor 와 viewer 를 한번에 지원하기도 하고, 깔끔한 UI 가 마음에 들었습니다. 에디터의 글씨를 컬러풀하게 바꿀수 있는 소수의 플러그인도 지원합니다. 단, 이 라이브러리는 기본적으로 Client-side 만 지원하므로, SSR 을 하는 프로젝트에서 사용하려면 약간 복잡한 처리를 해주어야 합니다. 이 부분의 처리는 [Next.js 에서 tui.editor 사용하기](https://myeongjae.kim/blog/2020/04/05/tui-editor-with-nextjs) << 이 분의 글을 참고 하였습니다.

### **댓글 구현**

#### **DISQUS**

댓글은 (조금 무겁지만) 다양한 사람들이 사용할 수 있는 disqus-react 를 사용했습니다.

다음 글에서는 구현부를 좀더 상세히 살펴보겠습니다.