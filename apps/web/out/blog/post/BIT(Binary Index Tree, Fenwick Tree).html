<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><link rel="preload" as="font" href="/_next/static/media/1060bab20f18b5c2-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/d408fbf19ace88cb.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/0e24e4874419c0fb.css" data-precedence="next"/><title>BIT(Binary Index Tree, Fenwick Tree) - Papaya&#x27;s Memory</title><meta name="description" content="BIT(Binary Index Tree, Fenwick Tree)"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="google-site-verification" content="MZ5uiRya7PN81lDA3gaTujr4KhMMhI1F-L7xxRUErAo"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" noModule=""></script></head><body class="__className_656221"><html lang="ko"><body><div class="sticky top-0 z-10 font-semibold font-mono bg-black px-8 h-20 flex items-center sm:px-20 lg:px-40"><a href="/blog"><h1 class="w-72 text-3xl bg-gradient-to-r from-pink-500 to-yellow-500 bg-clip-text text-transparent">Papaya&#x27;s Memory</h1></a></div><div class="container m-auto px-8 py-8 lg:max-w-4xl"><h1 class="mb-8 mt-20 text-center text-3xl font-semibold xl:font-bold dark:text-white lg:text-4xl xl:text-5xl">BIT(Binary Index Tree, Fenwick Tree)</h1><div class="flex flex-wrap justify-center w-max"><a href="/blog/category/Algorithm"><h1 class="select-none text-xs font-semibold px-2 py-1 m-1 flex items-center bg-gradient-to-r from-purple-700 to-pink-600 text-white rounded-full border-transparent hover:scale-110">#<!-- -->Algorithm</h1></a></div><div class="select-none px-8 py-8 text-gray-500"><div class="flex flex-wrap items-center sm:flex-nowrap sm:space-x-6"><div class="relative h-12 w-12 flex-shrink-0 "><a href="/about"><img alt="Papaya" loading="lazy" decoding="async" data-nimg="fill" class="rounded-full object-cover" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="https://res.cloudinary.com/dyfuiigbw/image/upload/v1684121494/blog/small_DSC_03085_0d0f3b6429.jpg"/></a></div><div class="bg-brand-secondary/20 rounded-full py-2 text-sm text-blue-600 dark:text-blue-500 flex flex-col"><a href="/about"><h3 class="text-lg font-medium text-gray-800 dark:text-gray-300">Papaya</h3></a><span class="text-sm text-gray-500 dark:text-gray-400">2023년 05월 13일</span></div></div></div><main class="mt-8 mb-8"><img alt="thumbnail" loading="lazy" width="1000" height="563" decoding="async" data-nimg="1" class="m-auto" style="color:transparent" src="https://res.cloudinary.com/dyfuiigbw/image/upload/v1684121495/blog/large_Adobe_Stock_293544959_8c4af1e7d6.jpg"/><div class="rmd"><blockquote>
<p>2진법 인덱스 구조를 활용해 구간 합 문제를 효과적으로 해결할 수 있는 자료구조</p>
</blockquote>
<h3>이해를 위한 선수 지식 - 정수 &amp; 2진수 표기 및 비트 반전</h3>
<ul>
<li>
<p>정수는 2의 보수 법칙에 따라 마지막 비트 인덱스인 0부터 <code class="rmd-default">2^0 + ... + 2^N-1</code> 와 같은 식으로 10진수로 표기 가능하다.</p>
<p>음의 정수로 반전시, <strong>모든 비트를 뒤집고 1을 더하여 표기한다.</strong></p>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-python" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955"># Sudo Code</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 2진수 표시</span><span>
</span><span></span><span class="token" style="color:#b5cea8">7</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span>  </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">*</span><span class="token" style="color:#b5cea8">8</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">*</span><span class="token" style="color:#b5cea8">8</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">*</span><span class="token" style="color:#b5cea8">8</span><span> </span><span class="token" style="color:#b5cea8">0000111</span><span class="token" style="color:#d4d4d4">]</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">-</span><span class="token" style="color:#b5cea8">7</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">*</span><span class="token" style="color:#b5cea8">8</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">*</span><span class="token" style="color:#b5cea8">8</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">*</span><span class="token" style="color:#b5cea8">8</span><span> </span><span class="token" style="color:#b5cea8">1111001</span><span class="token" style="color:#d4d4d4">]</span><span>
</span>
<span></span><span class="token" style="color:#6a9955"># Python</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 비트 반전 연산</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">(</span><span>i </span><span class="token" style="color:#d4d4d4">&amp;</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span>i</span><span class="token" style="color:#d4d4d4">)</span></code></div></pre>
</li>
</ul>
<h3>구현 과정</h3>
<ol>
<li>
<p><strong>특정 숫자 K의 0이 아닌 마지막 비트 찾기 &amp; 트리 구성</strong></p>
<ul>
<li><code class="rmd-default">K &amp; -K</code> 식으로 계산하면 된다.</li>
<li><strong>0이 아닌 마지막 비트가 필요한 이유</strong>
<ul>
<li>연산 결과를 보면, 각 <strong>0이 아닌 마지막 비트</strong>는 저장하고 있는 값의 개수를 의미한다.</li>
<li><code class="rmd-default">ex. 0=1, 1=1, 2=2, 3=1, 4=4, 5=1, 6=2, 7=1, 8=8</code></li>
</ul>
</li>
<li>트리 구성하기<!-- -->
<ul>
<li><strong>0이 아닌 마지막 비트</strong> 값들은 자세히 보면 <strong>트리 자료구조를 닮아 있어</strong> 이 알고리즘을 사용하는 이유가 된다.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>데이터 업데이트</p>
<ul>
<li>0이 아닌 마지막 비트만큼 <strong>더하면서</strong> 구간들의 값을 변경<!-- -->
<ul>
<li><code class="rmd-default">ex. 3nd 번째 인덱스 =&gt; [3, 4, 8, 16] 번째 인덱스의 값과 겹치므로 4번 업데이트 된다.</code></li>
</ul>
</li>
<li>높이가 O(logN) 이므로 최악의 경우에도 O(logN) 보장</li>
</ul>
</li>
<li>
<p>질의값 구하기</p>
<ul>
<li>0이 아닌 마지막 비트 만큼 <strong>빼면서</strong> 구간 합을 구한다.</li>
</ul>
</li>
</ol>
<p>추가적으로, 아래 문제는 <strong>세그먼트 트리</strong> 로도 풀 수 있을 것 같은데, BIT 는 구현이 빠르다는 것이 장점이기도 해서 이걸로 구현할 수 없는 문제는 세그먼트 트리로 구현해보는 것도 좋을 것 같다.</p>
<h3>구현 (BackJoon / 2042)</h3>
<pre><div style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-python" style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955"># Input</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 5 2 2</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 1</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 2</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 3</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 4</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 5</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 1 3 6</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 2 2 5</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 1 5 2</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 2 3 5</span><span>
</span>
<span></span><span class="token" style="color:#6a9955"># Result</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 17</span><span>
</span><span></span><span class="token" style="color:#6a9955"># 12</span><span>
</span>
<span>n </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">5</span><span>
</span><span>arr </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#b5cea8">2</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#b5cea8">3</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#b5cea8">4</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#b5cea8">5</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#6a9955"># [0] * (n + 1)</span><span>
</span><span>tree </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>n </span><span class="token" style="color:#d4d4d4">+</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>cmds </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">3</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">6</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">2</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">2</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">5</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">5</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">2</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">2</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">3</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">5</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">]</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">prefix_sum</span><span class="token" style="color:#d4d4d4">(</span><span>i</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    result </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">while</span><span> i </span><span class="token" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>        result </span><span class="token" style="color:#d4d4d4">+=</span><span> tree</span><span class="token" style="color:#d4d4d4">[</span><span>i</span><span class="token" style="color:#d4d4d4">]</span><span>
</span><span>        i </span><span class="token" style="color:#d4d4d4">-=</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>i </span><span class="token" style="color:#d4d4d4">&amp;</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span>i</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">return</span><span> result
</span>
<span></span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">interval_sum</span><span class="token" style="color:#d4d4d4">(</span><span>s</span><span class="token" style="color:#d4d4d4">,</span><span> e</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">return</span><span> prefix_sum</span><span class="token" style="color:#d4d4d4">(</span><span>e</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span> prefix_sum</span><span class="token" style="color:#d4d4d4">(</span><span>s </span><span class="token" style="color:#d4d4d4">-</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">def</span><span> </span><span class="token" style="color:#dcdcaa">update</span><span class="token" style="color:#d4d4d4">(</span><span>i</span><span class="token" style="color:#d4d4d4">,</span><span> val</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">while</span><span> i </span><span class="token" style="color:#d4d4d4">&lt;=</span><span> n</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>        tree</span><span class="token" style="color:#d4d4d4">[</span><span>i</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">+=</span><span> val
</span><span>        i </span><span class="token" style="color:#d4d4d4">+=</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>i </span><span class="token" style="color:#d4d4d4">&amp;</span><span> </span><span class="token" style="color:#d4d4d4">-</span><span>i</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span></span><span class="token" style="color:#6a9955"># 초기 값 업데이트, 0 번째 무시</span><span>
</span><span></span><span class="token" style="color:#569CD6">for</span><span> i </span><span class="token" style="color:#569CD6">in</span><span> </span><span class="token" style="color:#ce9178">range</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#ce9178">len</span><span class="token" style="color:#d4d4d4">(</span><span>arr</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    update</span><span class="token" style="color:#d4d4d4">(</span><span>i</span><span class="token" style="color:#d4d4d4">,</span><span> arr</span><span class="token" style="color:#d4d4d4">[</span><span>i</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span>
</span>
<span></span><span class="token" style="color:#6a9955"># 커맨드 업데이트</span><span>
</span><span></span><span class="token" style="color:#569CD6">for</span><span> cmd </span><span class="token" style="color:#569CD6">in</span><span> cmds</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    a</span><span class="token" style="color:#d4d4d4">,</span><span> b</span><span class="token" style="color:#d4d4d4">,</span><span> c </span><span class="token" style="color:#d4d4d4">=</span><span> cmd
</span><span>    </span><span class="token" style="color:#569CD6">if</span><span> a </span><span class="token" style="color:#d4d4d4">==</span><span> </span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>        update</span><span class="token" style="color:#d4d4d4">(</span><span>b</span><span class="token" style="color:#d4d4d4">,</span><span> c </span><span class="token" style="color:#d4d4d4">-</span><span> arr</span><span class="token" style="color:#d4d4d4">[</span><span>b</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#6a9955"># 구간 합 업데이트 : 변경된 차이 만큼 업데이트</span><span>
</span><span>        arr</span><span class="token" style="color:#d4d4d4">[</span><span>b</span><span class="token" style="color:#d4d4d4">]</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> c </span><span class="token" style="color:#6a9955"># 원본 값 업데이트</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">else</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">print</span><span class="token" style="color:#d4d4d4">(</span><span>interval_sum</span><span class="token" style="color:#d4d4d4">(</span><span>b</span><span class="token" style="color:#d4d4d4">,</span><span> c</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span></code></div></pre></div></main><div class="select-none mt-3 rounded-2xl bg-gray-50 px-8 py-8 text-gray-500 dark:bg-gray-900 dark:text-gray-400"><div class="flex flex-wrap items-start sm:flex-nowrap sm:space-x-6"><div class="relative mt-1 h-24 w-24 flex-shrink-0 "><a href="/about"><img alt="Papaya" loading="lazy" decoding="async" data-nimg="fill" class="rounded-full object-cover" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="https://res.cloudinary.com/dyfuiigbw/image/upload/v1684121494/blog/small_DSC_03085_0d0f3b6429.jpg"/></a></div><div><a class="bg-brand-secondary/20 rounded-full py-2 text-sm text-blue-600 dark:text-blue-500 flex flex-col" href="/about"><h3 class="text-lg font-medium text-gray-800 dark:text-gray-300 underline decoration-purple-500">Papaya</h3></a><span class="text-sm text-gray-500 dark:text-gray-400">게임과 애니메이션을 좋아하는 개발자 나부랭이 입니당 Back-end, Full-Stack, 2D/3D Graphic, Game 개발에 관심이 많아요.</span></div></div></div><div class="h-8"></div><section style="width:100%"></section></div></body></html><script src="/_next/static/chunks/webpack-169ccb924adecfba.js" async=""></script><script src="/_next/static/chunks/2443530c-6da1337cffa17635.js" async=""></script><script src="/_next/static/chunks/139-6aa880ca53f958e6.js" async=""></script><script src="/_next/static/chunks/main-app-69ecd26e4c99526a.js" async=""></script></body></html><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/1060bab20f18b5c2-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/d408fbf19ace88cb.css\",{\"as\":\"style\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:HL[\"/_next/static/css/0e24e4874419c0fb.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"5:I{\"id\":\"47858\",\"chunks\":[\"272:static/chunks/webpack-169ccb924adecfba.js\",\"667:static/chunks/2443530c-6da1337cffa17635.js\",\"139:static/chunks/139-6aa880ca53f958e6.js\"],\"name\":\"\",\"async\":false}\n7:I{\"id\":\"63055\",\"chunks\":[\"272:static/chunks/webpack-169ccb924adecfba.js\",\"667:static/chunks/2443530c-6da1337cffa17635.js\",\"139:static/chunks/139-6aa880ca53f958e6.js\"],\"name\":\"\",\"async\":false}\n8:I{\"id\":\"99544\",\"chunks\":[\"272:static/chunks/webpack-169ccb924adecfba.js\",\"667:static/chunks/2443530c-6da1337cffa17635.js\","])</script><script>self.__next_f.push([1,"\"139:static/chunks/139-6aa880ca53f958e6.js\"],\"name\":\"\",\"async\":false}\n9:I{\"id\":\"10099\",\"chunks\":[\"272:static/chunks/webpack-169ccb924adecfba.js\",\"667:static/chunks/2443530c-6da1337cffa17635.js\",\"139:static/chunks/139-6aa880ca53f958e6.js\"],\"name\":\"\",\"async\":false}\na:I{\"id\":\"90414\",\"chunks\":[\"414:static/chunks/414-7c78cf20dc92d836.js\",\"656:static/chunks/656-5669202458fac1e8.js\",\"732:static/chunks/app/blog/category/[slug]/page-25d13be2fb374ee6.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d408fbf19ace88cb.css\",\"precedence\":\"next\"}]],[\"$\",\"$L5\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/post/BIT(Binary%20Index%20Tree%2C%20Fenwick%20Tree)\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[\"post\",{\"children\":[[\"slug\",\"BIT(Binary%20Index%20Tree%2C%20Fenwick%20Tree)\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"BIT(Binary Index Tree, Fenwick Tree)\\\"}\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[\"$L6\",[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\"}]],\"globalErrorComponent\":\"$7\",\"notFound\":[\"$\",\"html\",null,{\"lang\":\"ko\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_656221\",\"children\":[\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}]}],\"asNotFound\":false,\"children\":[[\"$\",\"html\",null,{\"lang\":\"ko\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_656221\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[[\"$\",\"html\",null,{\"lang\":\"ko\",\"children\":[\"$\",\"body\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"sticky top-0 z-10 font-semibold font-mono bg-black px-8 h-20 flex items-center sm:px-20 lg:px-40\",\"children\":[\"$\",\"$La\",null,{\"href\":\"/blog\",\"children\":[\"$\",\"h1\",null,{\"className\":\"w-72 text-3xl bg-gradient-to-r from-pink-500 to-yellow-500 bg-clip-text text-transparent\",\"children\":\"Papaya's Memory\"}]}]}],[\"$\",\"div\",null,{\"className\":\"container m-auto px-8 py-8 lg:max-w-4xl\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"post\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"post\",\"children\",[\"slug\",\"BIT(Binary%20Index%20Tree%2C%20Fenwick%20Tree)\",\"d\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$Lb\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":\\\"BIT(Binary Index Tree, Fenwick Tree)\\\"}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0e24e4874419c0fb.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"slug\",\"BIT(Binary%20Index%20Tree%2C%20Fenwick%20Tree)\",\"d\"]},\"styles\":[]}],\"segment\":\"post\"},\"styles\":[]}]}]]}]}],null],\"segment\":\"blog\"},\"styles\":[]}]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"c:I{\"id\":\"7589\",\"chunks\":[\"414:static/chunks/414-7c78cf20dc92d836.js\",\"656:static/chunks/656-5669202458fac1e8.js\",\"732:static/chunks/app/blog/category/[slug]/page-25d13be2fb374ee6.js\"],\"name\":\"\",\"async\":false}\nd:I{\"id\":\"38206\",\"chunks\":[\"414:static/chunks/414-7c78cf20dc92d836.js\",\"656:static/chunks/656-5669202458fac1e8.js\",\"625:static/chunks/625-8dfed4e2a03f0165.js\",\"811:static/chunks/app/blog/post/[slug]/page-dc3a215f65bac2e1.js\"],\"name\":\"\",\"async\":false}\ne:I{\"id\":\"19942\",\"chunks\":[\"414:static/chunks/414-7"])</script><script>self.__next_f.push([1,"c78cf20dc92d836.js\",\"656:static/chunks/656-5669202458fac1e8.js\",\"625:static/chunks/625-8dfed4e2a03f0165.js\",\"811:static/chunks/app/blog/post/[slug]/page-dc3a215f65bac2e1.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"h1\",null,{\"className\":\"mb-8 mt-20 text-center text-3xl font-semibold xl:font-bold dark:text-white lg:text-4xl xl:text-5xl\",\"children\":\"BIT(Binary Index Tree, Fenwick Tree)\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap justify-center w-max\",\"children\":[[\"$\",\"$La\",\"0\",{\"href\":\"/blog/category/Algorithm\",\"children\":[\"$\",\"h1\",null,{\"className\":\"select-none text-xs font-semibold px-2 py-1 m-1 flex items-center bg-gradient-to-r from-purple-700 to-pink-600 text-white rounded-full border-transparent hover:scale-110\",\"children\":[\"#\",\"Algorithm\"]}]}]]}],[\"$\",\"div\",null,{\"className\":\"select-none px-8 py-8 text-gray-500\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-wrap items-center sm:flex-nowrap sm:space-x-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"relative h-12 w-12 flex-shrink-0 \",\"children\":[\"$\",\"$La\",null,{\"href\":\"/about\",\"children\":[\"$\",\"$Lc\",null,{\"src\":\"https://res.cloudinary.com/dyfuiigbw/image/upload/v1684121494/blog/small_DSC_03085_0d0f3b6429.jpg\",\"alt\":\"Papaya\",\"className\":\"rounded-full object-cover\",\"fill\":true,\"sizes\":\"96px\"}]}]}],[\"$\",\"div\",null,{\"className\":\"bg-brand-secondary/20 rounded-full py-2 text-sm text-blue-600 dark:text-blue-500 flex flex-col\",\"children\":[[\"$\",\"$La\",null,{\"href\":\"/about\",\"children\":[\"$\",\"h3\",null,{\"className\":\"text-lg font-medium text-gray-800 dark:text-gray-300\",\"children\":\"Papaya\"}]}],[\"$\",\"span\",null,{\"className\":\"text-sm text-gray-500 dark:text-gray-400\",\"children\":\"2023년 05월 13일\"}]]}]]}]}],[\"$\",\"$Ld\",null,{\"content\":\"\u003e 2진법 인덱스 구조를 활용해 구간 합 문제를 효과적으로 해결할 수 있는 자료구조\\n\\n### 이해를 위한 선수 지식 - 정수 \u0026 2진수 표기 및 비트 반전\\n\\n- 정수는 2의 보수 법칙에 따라 마지막 비트 인덱스인 0부터 `2^0 + ... + 2^N-1` 와 같은 식으로 10진수로 표기 가능하다.\\n    \\n    음의 정수로 반전시, **모든 비트를 뒤집고 1을 더하여 표기한다.**\\n    \\n    ```python\\n    # Sudo Code\\n    # 2진수 표시\\n    7 =  [0*8 0*8 0*8 0000111]\\n    -7 = [1*8 1*8 1*8 1111001]\\n    \\n    # Python\\n    # 비트 반전 연산\\n    (i \u0026 -i)\\n    ```\\n\\n### 구현 과정\\n\\n1. **특정 숫자 K의 0이 아닌 마지막 비트 찾기 \u0026 트리 구성**\\n    - `K \u0026 -K` 식으로 계산하면 된다.\\n    - **0이 아닌 마지막 비트가 필요한 이유**\\n        - 연산 결과를 보면, 각 **0이 아닌 마지막 비트**는 저장하고 있는 값의 개수를 의미한다.\\n        - `ex. 0=1, 1=1, 2=2, 3=1, 4=4, 5=1, 6=2, 7=1, 8=8`\\n    - 트리 구성하기\\n        - **0이 아닌 마지막 비트** 값들은 자세히 보면 **트리 자료구조를 닮아 있어** 이 알고리즘을 사용하는 이유가 된다.\\n\\n2. 데이터 업데이트\\n    - 0이 아닌 마지막 비트만큼 **더하면서** 구간들의 값을 변경\\n        - `ex. 3nd 번째 인덱스 =\u003e [3, 4, 8, 16] 번째 인덱스의 값과 겹치므로 4번 업데이트 된다.`\\n    - 높이가 O(logN) 이므로 최악의 경우에도 O(logN) 보장\\n\\n3. 질의값 구하기\\n    - 0이 아닌 마지막 비트 만큼 **빼면서** 구간 합을 구한다.\\n\\n추가적으로, 아래 문제는 **세그먼트 트리** 로도 풀 수 있을 것 같은데, BIT 는 구현이 빠르다는 것이 장점이기도 해서 이걸로 구현할 수 없는 문제는 세그먼트 트리로 구현해보는 것도 좋을 것 같다.\\n\\n### 구현 (BackJoon / 2042)\\n\\n```python\\n# Input\\n# 5 2 2\\n# 1\\n# 2\\n# 3\\n# 4\\n# 5\\n# 1 3 6\\n# 2 2 5\\n# 1 5 2\\n# 2 3 5\\n\\n# Result\\n# 17\\n# 12\\n\\nn = 5\\narr = [0, 1,2,3,4,5] # [0] * (n + 1)\\ntree = [0] * (n + 1)\\ncmds = [\\n    (1, 3, 6),\\n    (2, 2, 5),\\n    (1, 5, 2),\\n    (2, 3, 5),\\n]\\n\\ndef prefix_sum(i):\\n    result = 0\\n    while i \u003e 0:\\n        result += tree[i]\\n        i -= (i \u0026 -i)\\n    return result\\n\\ndef interval_sum(s, e):\\n    return prefix_sum(e) - prefix_sum(s - 1)\\n\\ndef update(i, val):\\n    while i \u003c= n:\\n        tree[i] += val\\n        i += (i \u0026 -i)\\n\\n# 초기 값 업데이트, 0 번째 무시\\nfor i in range(1, len(arr)):\\n    update(i, arr[i])\\n\\n# 커맨드 업데이트\\nfor cmd in cmds:\\n    a, b, c = cmd\\n    if a == 1:\\n        update(b, c - arr[b]) # 구간 합 업데이트 : 변경된 차이 만큼 업데이트\\n        arr[b] = c # 원본 값 업데이트\\n    else:\\n        print(interval_sum(b, c))\\n```\",\"thumbnail\":{\"name\":\"large_AdobeStock_293544959.jpeg\",\"hash\":\"large_Adobe_Stock_293544959_8c4af1e7d6\",\"ext\":\".jpeg\",\"mime\":\"image/jpeg\",\"path\":null,\"width\":1000,\"height\":563,\"size\":119.99,\"url\":\"https://res.cloudinary.com/dyfuiigbw/image/upload/v1684121495/blog/large_Adobe_Stock_293544959_8c4af1e7d6.jpg\",\"provider_metadata\":{\"public_id\":\"blog/large_Adobe_Stock_293544959_8c4af1e7d6\",\"resource_type\":\"image\"}}}],[[\"$\",\"div\",null,{\"className\":\"select-none mt-3 rounded-2xl bg-gray-50 px-8 py-8 text-gray-500 dark:bg-gray-900 dark:text-gray-400\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex flex-wrap items-start sm:flex-nowrap sm:space-x-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"relative mt-1 h-24 w-24 flex-shrink-0 \",\"children\":[\"$\",\"$La\",null,{\"href\":\"/about\",\"children\":[\"$\",\"$Lc\",null,{\"src\":\"https://res.cloudinary.com/dyfuiigbw/image/upload/v1684121494/blog/small_DSC_03085_0d0f3b6429.jpg\",\"alt\":\"Papaya\",\"className\":\"rounded-full object-cover\",\"fill\":true,\"sizes\":\"96px\"}]}]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"$La\",null,{\"href\":\"/about\",\"className\":\"bg-brand-secondary/20 rounded-full py-2 text-sm text-blue-600 dark:text-blue-500 flex flex-col\",\"children\":[\"$\",\"h3\",null,{\"className\":\"text-lg font-medium text-gray-800 dark:text-gray-300 underline decoration-purple-500\",\"children\":\"Papaya\"}]}],[\"$\",\"span\",null,{\"className\":\"text-sm text-gray-500 dark:text-gray-400\",\"children\":\"게임과 애니메이션을 좋아하는 개발자 나부랭이 입니당 Back-end, Full-Stack, \\b2D/3D Graphic, Game 개발에 관심이 많아요.\"}]]}]]}]}],[\"$\",\"div\",null,{\"className\":\"h-8\"}]],[\"$\",\"$Le\",null,{}]]\n"])</script><script>self.__next_f.push([1,"6:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"BIT(Binary Index Tree, Fenwick Tree) - Papaya's Memory\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"BIT(Binary Index Tree, Fenwick Tree)\"}],null,null,null,null,null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[[[\"$\",\"meta\",null,{\"name\":\"google-site-verification\",\"content\":\"MZ5uiRya7PN81lDA3gaTujr4KhMMhI1F-L7xxRUErAo\"}]],null,null,null,null],null,null,null,null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}]],[],null]]\n"])</script>